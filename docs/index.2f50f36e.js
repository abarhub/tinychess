/*! chessboard.js v1.0.0 | (c) 2019 Chris Oakman | MIT License chessboardjs.com/license */!function(){"use strict";var e=window.jQuery,r="abcdefgh".split(""),n="1.8.3",t=P("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),o={};function a(e,r,n){function t(){o=0,a&&(a=!1,s())}var o=0,a=!1,i=[],s=function(){o=window.setTimeout(t,r),e.apply(n,i)};return function(e){i=arguments,o?a=!0:s()}}function i(){return"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,(function(e){return(16*Math.random()|0).toString(16)}))}function s(e){return JSON.parse(JSON.stringify(e))}function p(e){var r=e.split(".");return{major:parseInt(r[0],10),minor:parseInt(r[1],10),patch:parseInt(r[2],10)}}function c(e,r){for(var n in r)if(r.hasOwnProperty(n))for(var t="{"+n+"}",o=r[n];-1!==e.indexOf(t);)e=e.replace(t,o);return e}function u(e){return"string"==typeof e}function f(e){return"function"==typeof e}function d(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function h(e){return"fast"===e||"slow"===e||!!d(e)&&0<=e}function l(e){if(!u(e))return!1;var r=e.split("-");return 2===r.length&&v(r[0])&&v(r[1])}function v(e){return u(e)&&-1!==e.search(/^[a-h][1-8]$/)}function g(e){return u(e)&&-1!==e.search(/^[bw][KQRNBP]$/)}function w(e){if(!u(e))return!1;var r=(e=function(e){return e.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}(e=e.replace(/ .+$/,""))).split("/");if(8!==r.length)return!1;for(var n=0;n<8;n++)if(8!==r[n].length||-1!==r[n].search(/[^kqrnbpKQRNBP1]/))return!1;return!0}function b(r){if(!e.isPlainObject(r))return!1;for(var n in r)if(r.hasOwnProperty(n)&&(!v(n)||!g(r[n])))return!1;return!0}function m(){return typeof window.$&&e.fn&&e.fn.jquery&&function(e,r){e=p(e),r=p(r);var n=1e5*e.major*1e5+1e5*e.minor+e.patch;return 1e5*r.major*1e5+1e5*r.minor+r.patch<=n}(e.fn.jquery,n)}function P(e){if(!w(e))return!1;for(var n,t=(e=e.replace(/ .+$/,"")).split("/"),o={},a=8,i=0;i<8;i++){for(var s=t[i].split(""),p=0,c=0;c<s.length;c++)-1!==s[c].search(/[1-8]/)?p+=parseInt(s[c],10):(o[r[p]+a]=(n=s[c]).toLowerCase()===n?"b"+n.toUpperCase():"w"+n.toUpperCase(),p+=1);a-=1}return o}function y(e){if(!b(e))return!1;for(var n,t="",o=8,a=0;a<8;a++){for(var i=0;i<8;i++){var s=r[i]+o;e.hasOwnProperty(s)?t+=(n=void 0,"w"===(n=e[s].split(""))[0]?n[1].toUpperCase():n[1].toLowerCase()):t+="1"}7!==a&&(t+="/"),o-=1}return function(e){return e.replace(/11111111/g,"8").replace(/1111111/g,"7").replace(/111111/g,"6").replace(/11111/g,"5").replace(/1111/g,"4").replace(/111/g,"3").replace(/11/g,"2")}(t)}function x(e,n,t){for(var o=function(e){for(var n=[],t=0;t<8;t++)for(var o=0;o<8;o++){var a=r[t]+(o+1);e!==a&&n.push({square:a,distance:(i=e,s=a,p=i.split(""),c=r.indexOf(p[0])+1,u=parseInt(p[1],10),f=s.split(""),d=r.indexOf(f[0])+1,h=parseInt(f[1],10),l=Math.abs(c-d),v=Math.abs(u-h),v<=l?l:v)})}var i,s,p,c,u,f,d,h,l,v;n.sort((function(e,r){return e.distance-r.distance}));var g=[];for(t=0;t<n.length;t++)g.push(n[t].square);return g}(t),a=0;a<o.length;a++){var i=o[a];if(e.hasOwnProperty(i)&&e[i]===n)return i}return!1}function O(e){return"black"!==e.orientation&&(e.orientation="white"),!1!==e.showNotation&&(e.showNotation=!0),!0!==e.draggable&&(e.draggable=!1),"trash"!==e.dropOffBoard&&(e.dropOffBoard="snapback"),!0!==e.sparePieces&&(e.sparePieces=!1),e.sparePieces&&(e.draggable=!0),e.hasOwnProperty("pieceTheme")&&(u(e.pieceTheme)||f(e.pieceTheme))||(e.pieceTheme="img/chesspieces/wikipedia/{piece}.png"),h(e.appearSpeed)||(e.appearSpeed=200),h(e.moveSpeed)||(e.moveSpeed=200),h(e.snapbackSpeed)||(e.snapbackSpeed=60),h(e.snapSpeed)||(e.snapSpeed=30),h(e.trashSpeed)||(e.trashSpeed=100),function(e){return d(e)&&1<=e}(e.dragThrottleRate)||(e.dragThrottleRate=20),e}o.alpha="alpha-d2270",o.black="black-3c85d",o.board="board-b72b1",o.chessboard="chessboard-63f37",o.clearfix="clearfix-7da63",o.highlight1="highlight1-32417",o.highlight2="highlight2-9c5d2",o.notation="notation-322f9",o.numeric="numeric-fc462",o.piece="piece-417db",o.row="row-5277c",o.sparePieces="spare-pieces-7492f",o.sparePiecesBottom="spare-pieces-bottom-ae20f",o.sparePiecesTop="spare-pieces-top-4028b",o.square="square-55d63",o.white="white-1e1d7",window.Chessboard=function(n,p){if(!function(){if(m())return!0;return window.alert("Chessboard Error 1005: Unable to find a valid version of jQuery. Please include jQuery 1.8.3 or higher on the page\n\nExiting…"),!1}())return null;var d=function(r){if(""===r){return window.alert("Chessboard Error 1001: The first argument to Chessboard() cannot be an empty string.\n\nExiting…"),!1}u(r)&&"#"!==r.charAt(0)&&(r="#"+r);var n=e(r);if(1===n.length)return n;return window.alert("Chessboard Error 1003: The first argument to Chessboard() must be the ID of a DOM node, an ID query selector, or a single DOM node.\n\nExiting…"),!1}(n);if(!d)return null;p=O(p=function(r){return"start"===r?r={position:s(t)}:w(r)?r={position:P(r)}:b(r)&&(r={position:s(r)}),e.isPlainObject(r)||(r={}),r}(p));var h=null,g=null,S=null,T=null,q={},k=2,E="white",C={},B=null,I=null,M=null,N=!1,j={},D={},R={},Q=16;function X(e,r,n){if(!0===p.hasOwnProperty("showErrors")&&!1!==p.showErrors){var t="Chessboard Error "+e+": "+r;return"console"===p.showErrors&&"object"==typeof console&&"function"==typeof console.log?(console.log(t),void(2<=arguments.length&&console.log(n))):"alert"===p.showErrors?(n&&(t+="\n\n"+JSON.stringify(n)),void window.alert(t)):void(f(p.showErrors)&&p.showErrors(e,r,n))}}function Y(e){return f(p.pieceTheme)?p.pieceTheme(e):u(p.pieceTheme)?c(p.pieceTheme,{piece:e}):(X(8272,"Unable to build image source for config.pieceTheme."),"")}function K(e,r,n){var t='<img src="'+Y(e)+'" ';return u(n)&&""!==n&&(t+='id="'+n+'" '),t+='alt="" class="{piece}" data-piece="'+e+'" style="width:'+Q+"px;height:"+Q+"px;",r&&(t+="display:none;"),c(t+='" />',o)}function L(e){var r=["wK","wQ","wR","wB","wN","wP"];"black"===e&&(r=["bK","bQ","bR","bB","bN","bP"]);for(var n="",t=0;t<r.length;t++)n+=K(r[t],!1,j[r[t]]);return n}function U(r,n,t,a){var s=e("#"+D[r]),c=s.offset(),u=e("#"+D[n]),d=u.offset(),h=i();e("body").append(K(t,!0,h));var l=e("#"+h);l.css({display:"",position:"absolute",top:c.top,left:c.left}),s.find("."+o.piece).remove();var v={duration:p.moveSpeed,complete:function(){u.append(K(t)),l.remove(),f(a)&&a()}};l.animate(d,v)}function $(r,n,t){var a=e("#"+j[r]).offset(),s=e("#"+D[n]),c=s.offset(),u=i();e("body").append(K(r,!0,u));var d=e("#"+u);d.css({display:"",position:"absolute",left:a.left,top:a.top});var h={duration:p.moveSpeed,complete:function(){s.find("."+o.piece).remove(),s.append(K(r)),d.remove(),f(t)&&t()}};d.animate(c,h)}function J(){for(var r in h.find("."+o.piece).remove(),C)C.hasOwnProperty(r)&&e("#"+D[r]).append(K(C[r]))}function z(){h.html(function(e){"black"!==e&&(e="white");var n="",t=s(r),a=8;"black"===e&&(t.reverse(),a=1);for(var i="white",u=0;u<8;u++){n+='<div class="{row}">';for(var f=0;f<8;f++){var d=t[f]+a;n+='<div class="{square} '+o[i]+" square-"+d+'" style="width:'+Q+"px;height:"+Q+'px;" id="'+D[d]+'" data-square="'+d+'">',p.showNotation&&(("white"===e&&1===a||"black"===e&&8===a)&&(n+='<div class="{notation} {alpha}">'+t[f]+"</div>"),0===f&&(n+='<div class="{notation} {numeric}">'+a+"</div>")),n+="</div>",i="white"===i?"black":"white"}n+='<div class="{clearfix}"></div></div>',i="white"===i?"black":"white","white"===e?a-=1:a+=1}return c(n,o)}(E,p.showNotation)),J(),p.sparePieces&&("white"===E?(S.html(L("black")),T.html(L("white"))):(S.html(L("white")),T.html(L("black"))))}function F(e){var r=s(C),n=s(e);y(r)!==y(n)&&(f(p.onChange)&&p.onChange(r,n),C=e)}function A(e,r){for(var n in R)if(R.hasOwnProperty(n)){var t=R[n];if(e>=t.left&&e<t.left+Q&&r>=t.top&&r<t.top+Q)return n}return"offboard"}function W(){h.find("."+o.square).removeClass(o.highlight1+" "+o.highlight2)}function G(){W();var e=s(C);delete e[M],F(e),J(),g.fadeOut(p.trashSpeed),N=!1}function H(r,n,t,a){f(p.onDragStart)&&!1===p.onDragStart(r,n,s(C),E)||(N=!0,B=n,I="spare"===(M=r)?"offboard":r,function(){for(var r in R={},D)D.hasOwnProperty(r)&&(R[r]=e("#"+D[r]).offset())}(),g.attr("src",Y(n)).css({display:"",position:"absolute",left:t-Q/2,top:a-Q/2}),"spare"!==r&&e("#"+D[r]).addClass(o.highlight1).find("."+o.piece).css("display","none"))}function V(r,n){g.css({left:r-Q/2,top:n-Q/2});var t=A(r,n);t!==I&&(v(I)&&e("#"+D[I]).removeClass(o.highlight2),v(t)&&e("#"+D[t]).addClass(o.highlight2),f(p.onDragMove)&&p.onDragMove(t,I,M,B,s(C),E),I=t)}function Z(r){var n="drop";if("offboard"===r&&"snapback"===p.dropOffBoard&&(n="snapback"),"offboard"===r&&"trash"===p.dropOffBoard&&(n="trash"),f(p.onDrop)){var t=s(C);"spare"===M&&v(r)&&(t[r]=B),v(M)&&"offboard"===r&&delete t[M],v(M)&&v(r)&&(delete t[M],t[r]=B);var o=s(C),a=p.onDrop(M,r,B,t,o,E);"snapback"!==a&&"trash"!==a||(n=a)}"snapback"===n?function(){if("spare"!==M){W();var r=e("#"+D[M]).offset(),n={duration:p.snapbackSpeed,complete:function(){J(),g.css("display","none"),f(p.onSnapbackEnd)&&p.onSnapbackEnd(B,M,s(C),E)}};g.animate(r,n),N=!1}else G()}():"trash"===n?G():"drop"===n&&function(r){W();var n=s(C);delete n[M],n[r]=B,F(n);var t=e("#"+D[r]).offset(),o={duration:p.snapSpeed,complete:function(){J(),g.css("display","none"),f(p.onSnapEnd)&&p.onSnapEnd(M,r,B)}};g.animate(t,o),N=!1}(r)}function _(e){e.preventDefault()}function ee(r){if(p.draggable){var n=e(this).attr("data-square");v(n)&&C.hasOwnProperty(n)&&H(n,C[n],r.pageX,r.pageY)}}function re(r){if(p.draggable){var n=e(this).attr("data-square");v(n)&&C.hasOwnProperty(n)&&(r=r.originalEvent,H(n,C[n],r.changedTouches[0].pageX,r.changedTouches[0].pageY))}}function ne(r){p.sparePieces&&H("spare",e(this).attr("data-piece"),r.pageX,r.pageY)}function te(r){p.sparePieces&&H("spare",e(this).attr("data-piece"),(r=r.originalEvent).changedTouches[0].pageX,r.changedTouches[0].pageY)}q.clear=function(e){q.position({},e)},q.destroy=function(){d.html(""),g.remove(),d.unbind()},q.fen=function(){return q.position("fen")},q.flip=function(){return q.orientation("flip")},q.move=function(){if(0!==arguments.length){for(var e=!0,r={},n=0;n<arguments.length;n++)if(!1!==arguments[n])if(l(arguments[n])){var t=arguments[n].split("-");r[t[0]]=t[1]}else X(2826,"Invalid move passed to the move method.",arguments[n]);else e=!1;var o=function(e,r){var n=s(e);for(var t in r)if(r.hasOwnProperty(t)&&n.hasOwnProperty(t)){var o=n[t];delete n[t],n[r[t]]=o}return n}(C,r);return q.position(o,e),o}},q.orientation=function(e){return 0===arguments.length?E:"white"===e||"black"===e?(E=e,z(),E):"flip"===e?(E="white"===E?"black":"white",z(),E):void X(5482,"Invalid value passed to the orientation method.",e)},q.position=function(r,n){return 0===arguments.length?s(C):u(r)&&"fen"===r.toLowerCase()?y(C):(u(r)&&"start"===r.toLowerCase()&&(r=s(t)),w(r)&&(r=P(r)),void(b(r)?(!1!==n&&(n=!0),n?(function(r,n,t){if(0!==r.length)for(var a=0,i=0;i<r.length;i++){var c=r[i];"clear"===c.type?e("#"+D[c.square]+" ."+o.piece).fadeOut(p.trashSpeed,u):"add"!==c.type||p.sparePieces?"add"===c.type&&p.sparePieces?$(c.piece,c.square,u):"move"===c.type&&U(c.source,c.destination,c.piece,u):e("#"+D[c.square]).append(K(c.piece,!0)).find("."+o.piece).fadeIn(p.appearSpeed,u)}function u(){(a+=1)===r.length&&(J(),f(p.onMoveEnd)&&p.onMoveEnd(s(n),s(t)))}}(function(e,r){e=s(e),r=s(r);var n=[],t={};for(var o in r)r.hasOwnProperty(o)&&e.hasOwnProperty(o)&&e[o]===r[o]&&(delete e[o],delete r[o]);for(o in r)if(r.hasOwnProperty(o)){var a=x(e,r[o],o);a&&(n.push({type:"move",source:a,destination:o,piece:r[o]}),delete e[a],delete r[o],t[o]=!0)}for(o in r)r.hasOwnProperty(o)&&(n.push({type:"add",square:o,piece:r[o]}),delete r[o]);for(o in e)e.hasOwnProperty(o)&&(t.hasOwnProperty(o)||(n.push({type:"clear",square:o,piece:e[o]}),delete e[o]));return n}(C,r),C,r),F(r)):(F(r),J())):X(6482,"Invalid value passed to the position method.",r)))},q.resize=function(){Q=function(){var e=parseInt(d.width(),10);if(!e||e<=0)return 0;for(var r=e-1;r%8!=0&&0<r;)r-=1;return r/8}(),h.css("width",8*Q+"px"),g.css({height:Q,width:Q}),p.sparePieces&&d.find("."+o.sparePieces).css("paddingLeft",Q+k+"px"),z()},q.start=function(e){q.position("start",e)};var oe=a((function(e){N&&V(e.pageX,e.pageY)}),p.dragThrottleRate),ae=a((function(e){N&&(e.preventDefault(),V(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}),p.dragThrottleRate);function ie(e){N&&Z(A(e.pageX,e.pageY))}function se(e){N&&Z(A(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function pe(r){if(!N&&f(p.onMouseoverSquare)){var n=e(r.currentTarget).attr("data-square");if(v(n)){var t=!1;C.hasOwnProperty(n)&&(t=C[n]),p.onMouseoverSquare(n,t,s(C),E)}}}function ce(r){if(!N&&f(p.onMouseoutSquare)){var n=e(r.currentTarget).attr("data-square");if(v(n)){var t=!1;C.hasOwnProperty(n)&&(t=C[n]),p.onMouseoutSquare(n,t,s(C),E)}}}return E=p.orientation,p.hasOwnProperty("position")&&("start"===p.position?C=s(t):w(p.position)?C=P(p.position):b(p.position)?C=s(p.position):X(7263,"Invalid value passed to config.position.",p.position)),function(){!function(){for(var e=0;e<r.length;e++)for(var n=1;n<=8;n++){var t=r[e]+n;D[t]=t+"-"+i()}var o="KQRNBP".split("");for(e=0;e<o.length;e++){var a="w"+o[e],s="b"+o[e];j[a]=a+"-"+i(),j[s]=s+"-"+i()}}(),d.html(function(e){var r='<div class="{chessboard}">';return e&&(r+='<div class="{sparePieces} {sparePiecesTop}"></div>'),r+='<div class="{board}"></div>',e&&(r+='<div class="{sparePieces} {sparePiecesBottom}"></div>'),c(r+="</div>",o)}(p.sparePieces)),h=d.find("."+o.board),p.sparePieces&&(S=d.find("."+o.sparePiecesTop),T=d.find("."+o.sparePiecesBottom));var n=i();e("body").append(K("wP",!0,n)),g=e("#"+n),k=parseInt(h.css("borderLeftWidth"),10),q.resize()}(),function(){e("body").on("mousedown mousemove","."+o.piece,_),h.on("mousedown","."+o.square,ee),d.on("mousedown","."+o.sparePieces+" ."+o.piece,ne),h.on("mouseenter","."+o.square,pe).on("mouseleave","."+o.square,ce);var r=e(window);r.on("mousemove",oe).on("mouseup",ie),"ontouchstart"in document.documentElement&&(h.on("touchstart","."+o.square,re),d.on("touchstart","."+o.sparePieces+" ."+o.piece,te),r.on("touchmove",ae).on("touchend",se))}(),q},window.ChessBoard=window.Chessboard,window.Chessboard.fenToObj=P,window.Chessboard.objToFen=y}();
//# sourceMappingURL=index.2f50f36e.js.map
